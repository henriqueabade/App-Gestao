<!-- Product Details Modal -->
<style>
    :root {
        --color-primary: #b6a03e;
        --color-primary-hover: #d4c169;
        --color-positive: #a2ffa6;
        --color-negative: #ff5858;
        --color-negative-hover: #dc2626;
        --color-blue: #8aa7f3;
    }
    .overlay {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: rgba(0, 0, 0, 0.5);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 50;
    }
    
    .modal {
        background-color: white;
        border-radius: 0.5rem;
        box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
        width: 75%;
        max-width: 56rem;
        max-height: 90vh;
        display: flex;
        flex-direction: column;
        overflow: hidden;
    }
    
    .modal-header {
        padding: 1.5rem;
        border-bottom: 1px solid #E5E7EB;
        display: flex;
        align-items: center;
        justify-content: space-between;
        background-color: white;
        position: sticky;
        top: 0;
        z-index: 10;
    }
    
    .modal-body {
        padding: 1.5rem;
        overflow-y: auto;
        flex: 1;
    }
    
    .btn {
        transition: all 0.2s;
        border-radius: 0.375rem;
        font-weight: 500;
        display: inline-flex;
        align-items: center;
        justify-content: center;
    }
    
    .btn-primary {
        background-color: var(--color-primary);
        color: white;
        padding: 0.5rem 1rem;
    }

    .btn-primary:hover {
        background-color: var(--color-primary-hover);
    }
    
    .btn-secondary {
        background-color: var(--color-negative);
        color: white;
        padding: 0.375rem 0.75rem;
    }

    .btn-secondary:hover {
        background-color: var(--color-negative-hover);
    }
    
    .btn-destructive {
        background-color: var(--color-negative);
        color: white;
        padding: 0.375rem 0.75rem;
    }

    .btn-destructive:hover {
        background-color: var(--color-negative-hover);
    }
    
    .table-container {
        overflow-x: auto;
    }
    
    table {
        width: 100%;
        border-collapse: separate;
        border-spacing: 0;
    }
    
    th {
        position: sticky;
        top: 0;
        background-color: #F9FAFB;
        font-weight: 500;
        color: #4B5563;
        text-align: left;
        padding: 0.75rem 1rem;
        border-bottom: 1px solid #E5E7EB;
        text-transform: uppercase;
        font-size: 0.75rem;
        z-index: 1;
    }
    
    td {
        padding: 0.75rem 1rem;
        border-bottom: 1px solid #E5E7EB;
        color: #374151;
        font-size: 0.875rem;
    }
    
    tr:hover td {
        background-color: #F9FAFB;
    }
    
    .form-input {
        width: 100%;
        border: 1px solid #D1D5DB;
        border-radius: 0.375rem;
        padding: 0.5rem 0.75rem;
        font-size: 0.875rem;
        color: #374151;
        transition: all 0.2s;
    }
    
    .form-input:focus {
        outline: none;
        border-color: var(--color-primary);
        box-shadow: 0 0 0 3px color-mix(in srgb, var(--color-primary) 30%, transparent);
    }
    
    .toast {
        position: fixed;
        bottom: 1.5rem;
        right: 1.5rem;
        padding: 1rem;
        background-color: white;
        border-radius: 0.5rem;
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        display: flex;
        align-items: center;
        transform: translateY(150%);
        transition: transform 0.3s ease-out;
        z-index: 100;
    }
    
    .toast.show {
        transform: translateY(0);
    }
    
    .toast-icon {
        margin-right: 0.75rem;
        width: 1.5rem;
        height: 1.5rem;
        flex-shrink: 0;
    }
    
    .toast-content {
        flex: 1;
    }
    
    .toast-title {
        font-weight: 600;
        font-size: 0.875rem;
        color: #1F2937;
    }
    
    .toast-message {
        font-size: 0.75rem;
        color: #6B7280;
    }
    
    .toast-close {
        margin-left: 0.75rem;
        color: #9CA3AF;
        cursor: pointer;
    }
    
    .toast-close:hover {
        color: #6B7280;
    }
    
    .popup {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background-color: white;
        border-radius: 0.5rem;
        box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
        padding: 1.5rem;
        z-index: 100;
        max-width: 24rem;
        width: 90%;
    }
    
    .popup-backdrop {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: rgba(0, 0, 0, 0.5);
        z-index: 90;
    }
    
    @media (max-width: 768px) {
        .modal {
            width: 95%;
            max-width: none;
            height: 90vh;
            max-height: none;
        }
    }
</style>
<div class="overlay" id="modal-products-details" data-modal-id="products-details">
    <div class="modal">
        <div class="modal-header">
            <div class="flex items-center space-x-4">
                <button class="btn btn-secondary" id="backBtn">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-1" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd" />
                    </svg>
                    Voltar
                </button>
                
                <h2 class="text-xl font-semibold text-[var(--color-primary)]">DETALHE DE ESTOQUE – Mesa de Jantar Modelo Paris</h2>
            </div>
            
            <button class="btn btn-secondary" id="closeBtn">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd" />
                </svg>
            </button>
        </div>
        
        <div class="modal-body">
            <!-- Quick Summary -->
            <div class="mb-6 text-gray-700">
                <p>Último Lote Adicionado #12345 – Data: 26/06/2025</p>
            </div>
            
            <!-- Stock Table -->
            <div class="bg-white border border-gray-200 rounded-lg overflow-hidden mb-4">
                <div class="table-container">
                    <table class="w-full">
                        <thead>
                            <tr>
                                <th>Lote / Item</th>
                                <th>Processo Atual</th>
                                <th>Quantidade em Estoque</th>
                                <th>Última Alteração</th>
                                <th width="100">Ações</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>
                                    <div class="font-medium">Lote #12345</div>
                                    <div class="text-xs text-gray-500">26/06/2025</div>
                                </td>
                                <td>Corte</td>
                                <td class="quantity-cell">150</td>
                                <td>29/06/2025</td>
                                <td>
                                    <div class="flex space-x-2">
                                        <button class="text-gray-500 hover:text-gray-700 edit-quantity" title="Editar quantidade">
                                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                                <path d="M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z" />
                                            </svg>
                                        </button>
                                        <button class="text-gray-500 hover:text-red-500 delete-item" title="Remover lote">
                                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                                <path fill-rule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z" clip-rule="evenodd" />
                                            </svg>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <div class="font-medium">Lote #12344</div>
                                    <div class="text-xs text-gray-500">20/06/2025</div>
                                </td>
                                <td>Acabamento</td>
                                <td class="quantity-cell">75</td>
                                <td>25/06/2025</td>
                                <td>
                                    <div class="flex space-x-2">
                                        <button class="text-gray-500 hover:text-gray-700 edit-quantity" title="Editar quantidade">
                                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                                <path d="M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z" />
                                            </svg>
                                        </button>
                                        <button class="text-gray-500 hover:text-red-500 delete-item" title="Remover lote">
                                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                                <path fill-rule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z" clip-rule="evenodd" />
                                            </svg>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <div class="font-medium">Lote #12343</div>
                                    <div class="text-xs text-gray-500">15/06/2025</div>
                                </td>
                                <td>Montagem</td>
                                <td class="quantity-cell">30</td>
                                <td>22/06/2025</td>
                                <td>
                                    <div class="flex space-x-2">
                                        <button class="text-gray-500 hover:text-gray-700 edit-quantity" title="Editar quantidade">
                                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                                <path d="M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z" />
                                            </svg>
                                        </button>
                                        <button class="text-gray-500 hover:text-red-500 delete-item" title="Remover lote">
                                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                                <path fill-rule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z" clip-rule="evenodd" />
                                            </svg>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <div class="font-medium">Lote #12342</div>
                                    <div class="text-xs text-gray-500">10/06/2025</div>
                                </td>
                                <td>Embalagem</td>
                                <td class="quantity-cell">45</td>
                                <td>18/06/2025</td>
                                <td>
                                    <div class="flex space-x-2">
                                        <button class="text-gray-500 hover:text-gray-700 edit-quantity" title="Editar quantidade">
                                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                                <path d="M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z" />
                                            </svg>
                                        </button>
                                        <button class="text-gray-500 hover:text-red-500 delete-item" title="Remover lote">
                                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                                <path fill-rule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z" clip-rule="evenodd" />
                                            </svg>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <div class="font-medium">Lote #12341</div>
                                    <div class="text-xs text-gray-500">05/06/2025</div>
                                </td>
                                <td>Finalizado</td>
                                <td class="quantity-cell">20</td>
                                <td>15/06/2025</td>
                                <td>
                                    <div class="flex space-x-2">
                                        <button class="text-gray-500 hover:text-gray-700 edit-quantity" title="Editar quantidade">
                                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                                <path d="M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z" />
                                            </svg>
                                        </button>
                                        <button class="text-gray-500 hover:text-red-500 delete-item" title="Remover lote">
                                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                                <path fill-rule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z" clip-rule="evenodd" />
                                            </svg>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <!-- Footer Info -->
                <div class="p-3 border-t border-gray-200">
                    <p class="text-xs text-gray-500">✏️ edita quantidade; 🗑️ remove o lote.</p>
                </div>
            </div>
            
            <!-- Summary Stats -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <div class="bg-white p-4 rounded-lg border border-gray-200">
                    <div class="text-sm font-medium text-gray-500">Total em Estoque</div>
                    <div class="text-2xl font-bold text-gray-800">320 unidades</div>
                </div>
                <div class="bg-white p-4 rounded-lg border border-gray-200">
                    <div class="text-sm font-medium text-gray-500">Valor Estimado</div>
                    <div class="text-2xl font-bold text-gray-800">R$ 784.000,00</div>
                </div>
                <div class="bg-white p-4 rounded-lg border border-gray-200">
                    <div class="text-sm font-medium text-gray-500">Lotes Ativos</div>
                    <div class="text-2xl font-bold text-gray-800">5</div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Delete Confirmation Popup -->
<div class="popup-backdrop hidden" id="deletePopupBackdrop"></div>
<div class="popup hidden" id="deletePopup">
    <h3 class="text-lg font-medium text-gray-900 mb-4">Remover Lote</h3>
    <p class="text-sm text-gray-600 mb-6">Tem certeza de que deseja remover o lote? Esta ação não pode ser desfeita.</p>
    <div class="flex justify-end space-x-3">
        <button class="btn btn-secondary" id="cancelDeleteBtn">Não</button>
        <button class="btn btn-destructive" id="confirmDeleteBtn">Sim</button>
    </div>
</div>

<!-- Toast Notifications -->
<div class="toast" id="quantityToast">
    <div class="toast-icon bg-green-100 text-green-500 rounded-full p-2">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
        </svg>
    </div>
    <div class="toast-content">
        <div class="toast-title">Quantidade Atualizada</div>
        <div class="toast-message">A quantidade foi atualizada com sucesso.</div>
    </div>
    <div class="toast-close">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd" />
        </svg>
    </div>
</div>

<div class="toast" id="deleteToast">
    <div class="toast-icon bg-red-100 text-red-500 rounded-full p-2">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
        </svg>
    </div>
    <div class="toast-content">
        <div class="toast-title">Lote Removido</div>
        <div class="toast-message">O lote foi removido com sucesso.</div>
    </div>
    <div class="toast-close">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd" />
        </svg>
    </div>
</div>
